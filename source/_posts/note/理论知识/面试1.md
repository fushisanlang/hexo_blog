---
title: 面试问题记录 一
tags:
  - 面试
categories:
  - note
abbrlink: 11468af0
date: 2021-07-04 00:00:00
---


### linux启动过程

1. 开机自检，加载BIOS
2. 读取ＭＢＲ
3. Boot Loader　grub引导菜单
4. 加载kernel内核
5. init进程依据inittab文件夹来设定运行级别
6. init进程执行rc.sysinit
7. 启动内核模块
8. 执行不同运行级别的脚本程序
9. 执行/etc/rc.d/rc.local
10. 执行/bin/login程序，启动mingetty,进入登录状态

<!--more-->
### ha和nginx的区别

* Nginx优点：

1. 工作在网络7层之上，可针对http应用做一些分流的策略，如针对域名.目录结构，它的正规规则比HAProxy更为强大和灵活，所以，目前为止广泛流行。
2. Nginx对网络稳定性的依赖非常小，理论上能ping通就能进行负载功能。
3. Nginx安装与配置比较简单，测试也比较方便，基本能把错误日志打印出来。
4. 可以承担高负载压力且稳定，硬件不差的情况下一般能支撑几万次的并发量，负载度比LVS小。
5. Nginx可以通过端口检测到服务器内部的故障，如根据服务器处理网页返回的状态码.超时等，并会把返回错误的请求重新提交到另一个节点。
6. 不仅仅是优秀的负载均衡器/反向代理软件，同时也是强大的Web应用服务器。LNMP也是近些年非常流行的Web架构，在高流量环境中稳定性也很好。
7. 可作为中层反向代理使用。
8. 可作为静态网页和图片服务器。
9. Nginx社区活跃，第三方模块非常多，相关的资料在网上比比皆是。

* Nginx缺点：

1. 适应范围较小，仅能支持http.https.Email协议。
2. 对后端服务器的健康检查，只支持通过端口检测，不支持url来检测。比如用户正在上传一个文件，而处理该上传的节点刚好在上传过程中出现故障，Nginx会把上传切到另一台服务器重新处理，而LVS就直接断掉了，如果是上传一个很大的文件或者很重要的文件的话，用户可能会因此而不满。

* LVS优点：
1. 抗负载能力强.是工作在网络4层之上仅作分发之用，没有流量的产生，这个特点也决定了它在负载均衡软件里的性能最强的，对内存和cpu资源消耗比较低。
2. 配置性比较低，这是一个缺点也是一个优点，因为没有可太多配置的东西，所以并不需要太多接触，大大减少了人为出错的几率。
3. 工作稳定，因为其本身抗负载能力很强，自身有完整的双机热备方案，如LVS+Keepalived，不过我们在项目实施中用得最多的还是LVS/DR+Keepalived。
4. 无流量，LVS只分发请求，而流量并不从它本身出去，这点保证了均衡器IO的性能不会收到大流量的影响。
5. 应用范围比较广，因为LVS工作在4层，所以它几乎可以对所有应用做负载均衡，包括http.数据库.在线聊天室等等。

* LVS的缺点：

1. 软件本身不支持正则表达式处理，不能做动静分离；而现在许多网站在这方面都有较强的需求，这个是Nginx/HAProxy+Keepalived的优势所在。
2. 如果是网站应用比较庞大的话，LVS/DR+Keepalived实施起来就比较复杂了，特别后面有Windows Server的机器的话，如果实施及配置还有维护过程就比较复杂了，相对而言，Nginx/HAProxy+Keepalived就简单多了。

* HAProxy优点：

1. AProxy是支持虚拟主机的，可以工作在4.7层(支持多网段)
2. AProxy的优点能够补充Nginx的一些缺点，比如支持Session的保持，Cookie的引导；同时支持通过获取指定的url来检测后端服务器的状态。
3. AProxy跟LVS类似，本身就只是一款负载均衡软件；单纯从效率上来讲HAProxy会比Nginx有更出色的负载均衡速度，在并发处理上也是优于Nginx的。
4. AProxy支持TCP协议的负载均衡转发，可以对MySQL读进行负载均衡，对后端的MySQL节点进行检测和负载均衡，大家可以用LVS+Keepalived对MySQL主从做负载均衡。
5. AProxy负载均衡策略非常多

* HAPorxy缺点：

1. 不支持POP/SMTP协议
2. 不支持SPDY协议
3. 不支持HTTP cache功能。现在不少开源的lb项目，都或多或少具备HTTP cache功能。
4. 重载配置的功能需要重启进程，虽然也是soft restart，但没有Nginx的reaload更为平滑和友好。
5. 多进程模式支持不够好


* 总结

从定位上来说，nginx重点是web服务器，替换的是apache，同时具备lb的作用，haproxy是单纯的lb，可以对照lvs进行比较
从架构上来说，进程模型不一样，haproxy是单进程方式无法充分利用多核，nginx是多进程模式
上手难易上来说，nginx的模块化更好，和lua之耦合比较紧密，比较方便进行业务模块的添加，开发起来轻量，haproxy需要多整体架构比较熟悉才能二次开发，haproxy在转发性能上略胜一筹，代码里面有很多geek的用法，比如rbtree非常高效
两个都是比较好的开源软件，nginx社区活跃，haproxy更新稍慢，比如https功能做了很久才发布

 

### mysql主从原理

1. 主写binlog
2. 主向从推送binlog
3. 从开启io线程，读取binlog内容写入relaylog
4. 从开启sql线程复现sql


### keepalive协议

vrrp协议

### pxc与主从的区别

### apache与nginx的区别

### nginx自动增减负载节点是怎么做的

### tomcat工作模式

### kvm

